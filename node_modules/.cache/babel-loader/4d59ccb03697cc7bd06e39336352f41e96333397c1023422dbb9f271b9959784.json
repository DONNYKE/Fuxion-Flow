{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{motion,AnimatePresence}from'framer-motion';import{FileText,Package,Handshake,BarChart2,Download}from'lucide-react';import{supabase}from'../supabaseClient';import LoadingSpinner from'../components/LoadingSpinner';import html2canvas from'html2canvas';import jsPDF from'jspdf';import{format,parseISO,isValid,startOfMonth,endOfMonth,isWithinInterval}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Reports=()=>{const[loading,setLoading]=useState(false);const[reportType,setReportType]=useState('');// 'inventory', 'loans', 'monthly_sales'\nconst[reportData,setReportData]=useState([]);const[products,setProducts]=useState([]);// Para cálculos de ventas\nconst[customers,setCustomers]=useState([]);// Para cálculos de ventas\nconst[partners,setPartners]=useState([]);// Para préstamos\n// Estados para el filtro de ventas mensuales\nconst[startMonth,setStartMonth]=useState('');const[endMonth,setEndMonth]=useState('');const reportRef=useRef();// Referencia para el contenido a exportar\nuseEffect(()=>{// Precargar productos, clientes y socios para todos los reportes\nconst preloadData=async()=>{const user=supabase.auth.getUser();if(!user){setLoading(false);return;}const userId=(await user).data.user.id;const{data:productsData,error:productsError}=await supabase.from('products').select('*').eq('user_id',userId);// Filtrar por user_id\nif(productsError)console.error('Error preloading products:',productsError.message);setProducts(productsData||[]);const{data:customersData,error:customersError}=await supabase.from('customers').select('*').eq('user_id',userId);// Filtrar por user_id\nif(customersError)console.error('Error preloading customers:',customersError.message);setCustomers(customersData||[]);const{data:partnersData,error:partnersError}=await supabase.from('partners').select('*').eq('user_id',userId);// Filtrar por user_id\nif(partnersError)console.error('Error preloading partners:',partnersError.message);setPartners(partnersData||[]);};preloadData();},[]);const generateReport=async()=>{setLoading(true);setReportData([]);// Limpiar datos anteriores\nconst user=supabase.auth.getUser();if(!user){alert('Debes iniciar sesión para generar reportes.');setLoading(false);return;}const userId=(await user).data.user.id;let data=[];let error=null;switch(reportType){case'inventory':({data,error}=await supabase.from('products').select('*').eq('user_id',userId)// Filtrar por user_id\n.order('name',{ascending:true}));break;case'loans':({data,error}=await supabase.from('loans').select('*, partners(name), products(name, points_per_unit, price_per_unit)').eq('user_id',userId)// Filtrar por user_id\n.order('loan_date',{ascending:false}));break;case'monthly_sales':// Obtener todas las órdenes entregadas para procesar\nconst{data:ordersData,error:ordersError}=await supabase.from('orders').select('*, order_items(*)').eq('status','delivered').eq('user_id',userId);// Filtrar por user_id\nif(ordersError){error=ordersError;break;}const monthlySales={};ordersData.forEach(order=>{if(order.completed_at){const completedDate=parseISO(order.completed_at);if(isValid(completedDate)){const monthYearKey=format(completedDate,'yyyy-MM');const monthYearLabel=format(completedDate,'MMM yyyy');// Filtrar por rango de meses si está seleccionado\nlet includeInReport=true;if(startMonth&&endMonth){const start=startOfMonth(parseISO(startMonth));const end=endOfMonth(parseISO(endMonth));includeInReport=isWithinInterval(completedDate,{start,end});}if(includeInReport){const{totalPrice}=calculateOrderTotals(order.order_items);if(!monthlySales[monthYearKey]){monthlySales[monthYearKey]={name:monthYearLabel,totalSales:0};}monthlySales[monthYearKey].totalSales+=totalPrice;}}}});data=Object.keys(monthlySales).sort().map(key=>monthlySales[key]);break;default:break;}if(error){console.error('Error generating report:',error.message);alert('Error al generar el reporte: '+error.message);}else{setReportData(data||[]);}setLoading(false);};// Función para calcular los totales de una orden completa (copiada de Home/History)\nconst calculateOrderTotals=orderItems=>{let totalPrice=0;orderItems.forEach(item=>{const product=products.find(p=>p.id===item.product_id);const pricePerUnit=item.price_at_sale||(product?product.price_per_unit:0);totalPrice+=pricePerUnit*item.quantity;});return{totalPrice};};const handleDownloadPDF=async()=>{setLoading(true);const input=reportRef.current;if(!input){alert('No hay contenido para exportar.');setLoading(false);return;}// Ajustar el escalado para mejor calidad en PDF\nconst scale=2;const canvas=await html2canvas(input,{scale:scale,useCORS:true,logging:true});const imgData=canvas.toDataURL('image/png');const pdf=new jsPDF('p','mm','a4');const imgWidth=210;const pageHeight=297;const imgHeight=canvas.height*imgWidth/canvas.width;let heightLeft=imgHeight;let position=0;pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;while(heightLeft>=0){position=heightLeft-imgHeight;pdf.addPage();pdf.addImage(imgData,'PNG',0,position,imgWidth,imgHeight);heightLeft-=pageHeight;}pdf.save(`${reportType}_report_${format(new Date(),'yyyyMMdd_HHmmss')}.pdf`);setLoading(false);};// Generar opciones de meses/años para los selectores\nconst getMonthYearOptions=()=>{const options=[];const currentYear=new Date().getFullYear();for(let y=currentYear;y>=currentYear-5;y--){for(let m=0;m<12;m++){const date=new Date(y,m,1);options.push({value:format(date,'yyyy-MM'),label:format(date,'MMM yyyy')});}}return options;};const monthYearOptions=getMonthYearOptions();return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 via-slate-50 to-zinc-50 pb-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-6 max-w-4xl\",children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-4xl font-extrabold text-gray-900 mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-gray-600 to-zinc-600\",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:0.6},children:\"Generar Reportes\"}),/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-5 mb-6 shadow-xl\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.2},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"reportType\",className:\"block text-gray-700 font-medium mb-1.5\",children:\"Selecciona el tipo de reporte:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"reportType\",value:reportType,onChange:e=>{setReportType(e.target.value);setReportData([]);// Limpiar datos al cambiar tipo de reporte\nsetStartMonth('');// Resetear filtros de fecha\nsetEndMonth('');},className:\"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/30\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Selecciona --\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inventory\",children:\"Inventario Actual\"}),/*#__PURE__*/_jsx(\"option\",{value:\"loans\",children:\"Pr\\xE9stamos Activos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly_sales\",children:\"Ventas Mensuales\"})]}),reportType==='monthly_sales'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startMonth\",className:\"block text-gray-700 font-medium mb-1.5\",children:\"Desde:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"startMonth\",value:startMonth,onChange:e=>setStartMonth(e.target.value),className:\"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/30\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un mes\"}),monthYearOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"endMonth\",className:\"block text-gray-700 font-medium mb-1.5\",children:\"Hasta:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"endMonth\",value:endMonth,onChange:e=>setEndMonth(e.target.value),className:\"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/30\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona un mes\"}),monthYearOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]})]})]}),/*#__PURE__*/_jsxs(motion.button,{onClick:generateReport,disabled:!reportType||reportType==='monthly_sales'&&(!startMonth||!endMonth),className:\"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2.5 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 mt-4\",whileHover:{scale:1.02},whileTap:{scale:0.98},children:[/*#__PURE__*/_jsx(FileText,{className:\"w-5 h-5\"}),\"Generar Reporte\"]})]}),loading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),reportData.length>0&&/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-5 shadow-xl\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.4},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:[\"Reporte de \",reportType==='inventory'?'Inventario':reportType==='loans'?'Préstamos':'Ventas Mensuales']}),/*#__PURE__*/_jsxs(motion.button,{onClick:handleDownloadPDF,className:\"px-4 py-2 bg-red-500 text-white rounded-xl font-semibold flex items-center gap-2 hover:bg-red-600 transition-colors\",whileHover:{scale:1.05},whileTap:{scale:0.95},children:[/*#__PURE__*/_jsx(Download,{className:\"w-5 h-5\"}),\" Descargar PDF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{ref:reportRef,className:\"p-4 bg-white rounded-lg\",children:[reportType==='inventory'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:\"Inventario Actual\"}),reportData.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b pb-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Cantidad: \",product.quantity]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Puntos/Unidad: \",product.points_per_unit]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Precio/Unidad: S/. \",product.price_per_unit.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Tipo: \",product.is_own?'Propio':'Prestado']})]},product.id))]}),reportType==='loans'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:\"Pr\\xE9stamos Activos\"}),reportData.map(loan=>{var _loan$partners,_loan$products,_loan$products2,_loan$products3;return/*#__PURE__*/_jsxs(\"div\",{className:\"border-b pb-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Socio: \",((_loan$partners=loan.partners)===null||_loan$partners===void 0?void 0:_loan$partners.name)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Producto: \",((_loan$products=loan.products)===null||_loan$products===void 0?void 0:_loan$products.name)||'N/A',\" x \",loan.quantity]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Fecha Pr\\xE9stamo: \",new Date(loan.loan_date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Puntos: \",loan.quantity*(((_loan$products2=loan.products)===null||_loan$products2===void 0?void 0:_loan$products2.points_per_unit)||0)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Precio: S/. \",(loan.quantity*(((_loan$products3=loan.products)===null||_loan$products3===void 0?void 0:_loan$products3.price_per_unit)||0)).toFixed(2)]})]},loan.id);})]}),reportType==='monthly_sales'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:\"Ventas Mensuales\"}),reportData.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-2\",children:\"No hay datos de ventas para el rango seleccionado.\"}):reportData.map(sale=>/*#__PURE__*/_jsxs(\"div\",{className:\"border-b pb-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Mes: \",sale.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[\"Ventas Totales: S/. \",sale.totalSales.toFixed(2)]})]},sale.name))]})]})]})]})});};export default Reports;","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","AnimatePresence","FileText","Package","Handshake","BarChart2","Download","supabase","LoadingSpinner","html2canvas","jsPDF","format","parseISO","isValid","startOfMonth","endOfMonth","isWithinInterval","jsx","_jsx","jsxs","_jsxs","Reports","loading","setLoading","reportType","setReportType","reportData","setReportData","products","setProducts","customers","setCustomers","partners","setPartners","startMonth","setStartMonth","endMonth","setEndMonth","reportRef","preloadData","user","auth","getUser","userId","data","id","productsData","error","productsError","from","select","eq","console","message","customersData","customersError","partnersData","partnersError","generateReport","alert","order","ascending","ordersData","ordersError","monthlySales","forEach","completed_at","completedDate","monthYearKey","monthYearLabel","includeInReport","start","end","totalPrice","calculateOrderTotals","order_items","name","totalSales","Object","keys","sort","map","key","orderItems","item","product","find","p","product_id","pricePerUnit","price_at_sale","price_per_unit","quantity","handleDownloadPDF","input","current","scale","canvas","useCORS","logging","imgData","toDataURL","pdf","imgWidth","pageHeight","imgHeight","height","width","heightLeft","position","addImage","addPage","save","Date","getMonthYearOptions","options","currentYear","getFullYear","y","m","date","push","value","label","monthYearOptions","className","children","h1","initial","opacity","animate","transition","duration","div","delay","htmlFor","onChange","e","target","option","button","onClick","disabled","whileHover","whileTap","length","ref","points_per_unit","toFixed","is_own","loan","_loan$partners","_loan$products","_loan$products2","_loan$products3","loan_date","toLocaleDateString","sale"],"sources":["C:/Users/donny/Downloads/project (1)/src/pages/Reports.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FileText, Package, Handshake, BarChart2, Download } from 'lucide-react';\nimport { supabase } from '../supabaseClient';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\nimport { format, parseISO, isValid, startOfMonth, endOfMonth, isWithinInterval } from 'date-fns';\n\nconst Reports = () => {\n  const [loading, setLoading] = useState(false);\n  const [reportType, setReportType] = useState(''); // 'inventory', 'loans', 'monthly_sales'\n  const [reportData, setReportData] = useState([]);\n  const [products, setProducts] = useState([]); // Para cálculos de ventas\n  const [customers, setCustomers] = useState([]); // Para cálculos de ventas\n  const [partners, setPartners] = useState([]); // Para préstamos\n\n  // Estados para el filtro de ventas mensuales\n  const [startMonth, setStartMonth] = useState('');\n  const [endMonth, setEndMonth] = useState('');\n\n  const reportRef = useRef(); // Referencia para el contenido a exportar\n\n  useEffect(() => {\n    // Precargar productos, clientes y socios para todos los reportes\n    const preloadData = async () => {\n      const user = supabase.auth.getUser();\n      if (!user) {\n        setLoading(false);\n        return;\n      }\n      const userId = (await user).data.user.id;\n\n      const { data: productsData, error: productsError } = await supabase\n        .from('products')\n        .select('*')\n        .eq('user_id', userId); // Filtrar por user_id\n      if (productsError) console.error('Error preloading products:', productsError.message);\n      setProducts(productsData || []);\n\n      const { data: customersData, error: customersError } = await supabase\n        .from('customers')\n        .select('*')\n        .eq('user_id', userId); // Filtrar por user_id\n      if (customersError) console.error('Error preloading customers:', customersError.message);\n      setCustomers(customersData || []);\n\n      const { data: partnersData, error: partnersError } = await supabase\n        .from('partners')\n        .select('*')\n        .eq('user_id', userId); // Filtrar por user_id\n      if (partnersError) console.error('Error preloading partners:', partnersError.message);\n      setPartners(partnersData || []);\n    };\n    preloadData();\n  }, []);\n\n  const generateReport = async () => {\n    setLoading(true);\n    setReportData([]); // Limpiar datos anteriores\n\n    const user = supabase.auth.getUser();\n    if (!user) {\n      alert('Debes iniciar sesión para generar reportes.');\n      setLoading(false);\n      return;\n    }\n    const userId = (await user).data.user.id;\n\n    let data = [];\n    let error = null;\n\n    switch (reportType) {\n      case 'inventory':\n        ({ data, error } = await supabase\n          .from('products')\n          .select('*')\n          .eq('user_id', userId) // Filtrar por user_id\n          .order('name', { ascending: true }));\n        break;\n      case 'loans':\n        ({ data, error } = await supabase\n          .from('loans')\n          .select('*, partners(name), products(name, points_per_unit, price_per_unit)')\n          .eq('user_id', userId) // Filtrar por user_id\n          .order('loan_date', { ascending: false }));\n        break;\n      case 'monthly_sales':\n        // Obtener todas las órdenes entregadas para procesar\n        const { data: ordersData, error: ordersError } = await supabase\n          .from('orders')\n          .select('*, order_items(*)')\n          .eq('status', 'delivered')\n          .eq('user_id', userId); // Filtrar por user_id\n        if (ordersError) {\n          error = ordersError;\n          break;\n        }\n\n        const monthlySales = {};\n        ordersData.forEach(order => {\n          if (order.completed_at) {\n            const completedDate = parseISO(order.completed_at);\n            if (isValid(completedDate)) {\n              const monthYearKey = format(completedDate, 'yyyy-MM');\n              const monthYearLabel = format(completedDate, 'MMM yyyy');\n\n              // Filtrar por rango de meses si está seleccionado\n              let includeInReport = true;\n              if (startMonth && endMonth) {\n                const start = startOfMonth(parseISO(startMonth));\n                const end = endOfMonth(parseISO(endMonth));\n                includeInReport = isWithinInterval(completedDate, { start, end });\n              }\n\n              if (includeInReport) {\n                const { totalPrice } = calculateOrderTotals(order.order_items);\n                if (!monthlySales[monthYearKey]) {\n                  monthlySales[monthYearKey] = { name: monthYearLabel, totalSales: 0 };\n                }\n                monthlySales[monthYearKey].totalSales += totalPrice;\n              }\n            }\n          }\n        });\n        data = Object.keys(monthlySales).sort().map(key => monthlySales[key]);\n        break;\n      default:\n        break;\n    }\n\n    if (error) {\n      console.error('Error generating report:', error.message);\n      alert('Error al generar el reporte: ' + error.message);\n    } else {\n      setReportData(data || []);\n    }\n    setLoading(false);\n  };\n\n  // Función para calcular los totales de una orden completa (copiada de Home/History)\n  const calculateOrderTotals = (orderItems) => {\n    let totalPrice = 0;\n    orderItems.forEach(item => {\n      const product = products.find(p => p.id === item.product_id);\n      const pricePerUnit = item.price_at_sale || (product ? product.price_per_unit : 0);\n      totalPrice += pricePerUnit * item.quantity;\n    });\n    return { totalPrice };\n  };\n\n  const handleDownloadPDF = async () => {\n    setLoading(true);\n    const input = reportRef.current;\n    if (!input) {\n      alert('No hay contenido para exportar.');\n      setLoading(false);\n      return;\n    }\n\n    // Ajustar el escalado para mejor calidad en PDF\n    const scale = 2; \n    const canvas = await html2canvas(input, {\n      scale: scale,\n      useCORS: true,\n      logging: true,\n    });\n\n    const imgData = canvas.toDataURL('image/png');\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgWidth = 210;\n    const pageHeight = 297;\n    const imgHeight = canvas.height * imgWidth / canvas.width;\n    let heightLeft = imgHeight;\n    let position = 0;\n\n    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n    heightLeft -= pageHeight;\n\n    while (heightLeft >= 0) {\n      position = heightLeft - imgHeight;\n      pdf.addPage();\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n    }\n\n    pdf.save(`${reportType}_report_${format(new Date(), 'yyyyMMdd_HHmmss')}.pdf`);\n    setLoading(false);\n  };\n\n  // Generar opciones de meses/años para los selectores\n  const getMonthYearOptions = () => {\n    const options = [];\n    const currentYear = new Date().getFullYear();\n    for (let y = currentYear; y >= currentYear - 5; y--) {\n      for (let m = 0; m < 12; m++) {\n        const date = new Date(y, m, 1);\n        options.push({\n          value: format(date, 'yyyy-MM'),\n          label: format(date, 'MMM yyyy')\n        });\n      }\n    }\n    return options;\n  };\n\n  const monthYearOptions = getMonthYearOptions();\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-slate-50 to-zinc-50 pb-16\">\n      <div className=\"container mx-auto px-4 py-6 max-w-4xl\">\n        <motion.h1\n          className=\"text-4xl font-extrabold text-gray-900 mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-gray-600 to-zinc-600\"\n          initial={{ opacity: 0, y: -50 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n        >\n          Generar Reportes\n        </motion.h1>\n\n        {/* Selector de Tipo de Reporte */}\n        <motion.div\n          className=\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-5 mb-6 shadow-xl\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, delay: 0.2 }}\n        >\n          <label htmlFor=\"reportType\" className=\"block text-gray-700 font-medium mb-1.5\">Selecciona el tipo de reporte:</label>\n          <select\n            id=\"reportType\"\n            value={reportType}\n            onChange={(e) => {\n              setReportType(e.target.value);\n              setReportData([]); // Limpiar datos al cambiar tipo de reporte\n              setStartMonth(''); // Resetear filtros de fecha\n              setEndMonth('');\n            }}\n            className=\"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/30\"\n          >\n            <option value=\"\">-- Selecciona --</option>\n            <option value=\"inventory\">Inventario Actual</option>\n            <option value=\"loans\">Préstamos Activos</option>\n            <option value=\"monthly_sales\">Ventas Mensuales</option>\n          </select>\n\n          {reportType === 'monthly_sales' && (\n            <div className=\"flex flex-col sm:flex-row gap-4 mt-4\">\n              <div className=\"flex-1\">\n                <label htmlFor=\"startMonth\" className=\"block text-gray-700 font-medium mb-1.5\">Desde:</label>\n                <select\n                  id=\"startMonth\"\n                  value={startMonth}\n                  onChange={(e) => setStartMonth(e.target.value)}\n                  className=\"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/30\"\n                >\n                  <option value=\"\">Selecciona un mes</option>\n                  {monthYearOptions.map(option => (\n                    <option key={option.value} value={option.value}>{option.label}</option>\n                  ))}\n                </select>\n              </div>\n              <div className=\"flex-1\">\n                <label htmlFor=\"endMonth\" className=\"block text-gray-700 font-medium mb-1.5\">Hasta:</label>\n                <select\n                  id=\"endMonth\"\n                  value={endMonth}\n                  onChange={(e) => setEndMonth(e.target.value)}\n                  className=\"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/30\"\n                >\n                  <option value=\"\">Selecciona un mes</option>\n                  {monthYearOptions.map(option => (\n                    <option key={option.value} value={option.value}>{option.label}</option>\n                  ))}\n                </select>\n              </div>\n            </div>\n          )}\n\n          <motion.button\n            onClick={generateReport}\n            disabled={!reportType || (reportType === 'monthly_sales' && (!startMonth || !endMonth))}\n            className=\"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2.5 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 mt-4\"\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n          >\n            <FileText className=\"w-5 h-5\" />\n            Generar Reporte\n          </motion.button>\n        </motion.div>\n\n        {loading && <LoadingSpinner />}\n\n        {reportData.length > 0 && (\n          <motion.div\n            className=\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-5 shadow-xl\"\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5, delay: 0.4 }}\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-2xl font-bold text-gray-800\">\n                Reporte de {reportType === 'inventory' ? 'Inventario' : reportType === 'loans' ? 'Préstamos' : 'Ventas Mensuales'}\n              </h2>\n              <motion.button\n                onClick={handleDownloadPDF}\n                className=\"px-4 py-2 bg-red-500 text-white rounded-xl font-semibold flex items-center gap-2 hover:bg-red-600 transition-colors\"\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n              >\n                <Download className=\"w-5 h-5\" /> Descargar PDF\n              </motion.button>\n            </div>\n\n            <div ref={reportRef} className=\"p-4 bg-white rounded-lg\">\n              {reportType === 'inventory' && (\n                <div className=\"space-y-2\">\n                  <h3 className=\"text-xl font-bold mb-2\">Inventario Actual</h3>\n                  {reportData.map(product => (\n                    <div key={product.id} className=\"border-b pb-2\">\n                      <p className=\"font-semibold\">{product.name}</p>\n                      <p className=\"text-sm\">Cantidad: {product.quantity}</p>\n                      <p className=\"text-sm\">Puntos/Unidad: {product.points_per_unit}</p>\n                      <p className=\"text-sm\">Precio/Unidad: S/. {product.price_per_unit.toFixed(2)}</p>\n                      <p className=\"text-sm\">Tipo: {product.is_own ? 'Propio' : 'Prestado'}</p>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {reportType === 'loans' && (\n                <div className=\"space-y-2\">\n                  <h3 className=\"text-xl font-bold mb-2\">Préstamos Activos</h3>\n                  {reportData.map(loan => (\n                    <div key={loan.id} className=\"border-b pb-2\">\n                      <p className=\"font-semibold\">Socio: {loan.partners?.name || 'N/A'}</p>\n                      <p className=\"text-sm\">Producto: {loan.products?.name || 'N/A'} x {loan.quantity}</p>\n                      <p className=\"text-sm\">Fecha Préstamo: {new Date(loan.loan_date).toLocaleDateString()}</p>\n                      <p className=\"text-sm\">Puntos: {loan.quantity * (loan.products?.points_per_unit || 0)}</p>\n                      <p className=\"text-sm\">Precio: S/. {(loan.quantity * (loan.products?.price_per_unit || 0)).toFixed(2)}</p>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {reportType === 'monthly_sales' && (\n                <div className=\"space-y-2\">\n                  <h3 className=\"text-xl font-bold mb-2\">Ventas Mensuales</h3>\n                  {reportData.length === 0 ? (\n                    <p className=\"text-gray-500 text-center py-2\">No hay datos de ventas para el rango seleccionado.</p>\n                  ) : (\n                    reportData.map(sale => (\n                      <div key={sale.name} className=\"border-b pb-2\">\n                        <p className=\"font-semibold\">Mes: {sale.name}</p>\n                        <p className=\"text-sm\">Ventas Totales: S/. {sale.totalSales.toFixed(2)}</p>\n                      </div>\n                    ))\n                  )}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Reports;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}