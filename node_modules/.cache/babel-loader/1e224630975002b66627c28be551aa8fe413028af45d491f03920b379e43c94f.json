{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{Users,Plus,Edit,Trash2,Handshake,Package,DollarSign,Star,XCircle}from'lucide-react';import{supabase}from'../supabaseClient';import LoadingSpinner from'../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Partners=()=>{const[loading,setLoading]=useState(true);const[partners,setPartners]=useState([]);const[products,setProducts]=useState([]);const[showPartnerModal,setShowPartnerModal]=useState(false);const[showLoanModal,setShowLoanModal]=useState(false);const[currentPartner,setCurrentPartner]=useState(null);const[selectedPartnerForLoan,setSelectedPartnerForLoan]=useState(null);const[partnerName,setPartnerName]=useState('');const[partnerPhone,setPartnerPhone]=useState('');const[partnerEmail,setPartnerEmail]=useState('');const[loanProductId,setLoanProductId]=useState('');const[loanQuantity,setLoanQuantity]=useState(1);const[loanDate,setLoanDate]=useState(new Date().toISOString().split('T')[0]);useEffect(()=>{fetchData();},[]);const fetchData=async()=>{setLoading(true);const{data:{user}}=await supabase.auth.getUser();if(!user){setLoading(false);return;}const userId=user.id;const{data:partnersData,error:partnersError}=await supabase.from('partners').select('*, loans(*, products(id, name, points_per_unit, price_per_unit))').eq('user_id',userId).order('name',{ascending:true});const{data:productsData,error:productsError}=await supabase.from('products').select('*').eq('user_id',userId);if(partnersError)console.error('Error fetching partners:',partnersError.message);if(productsError)console.error('Error fetching products:',productsError.message);setPartners(partnersData||[]);setProducts(productsData||[]);setLoading(false);};const calculateLoanTotals=loans=>{let totalPoints=0;let totalPrice=0;loans.forEach(loan=>{if(loan.products){totalPoints+=loan.quantity*loan.products.points_per_unit;totalPrice+=loan.quantity*loan.products.price_per_unit;}});return{totalPoints,totalPrice};};const handleAddPartnerClick=()=>{setCurrentPartner(null);setPartnerName('');setPartnerPhone('');setPartnerEmail('');setShowPartnerModal(true);};const handleEditPartnerClick=partner=>{setCurrentPartner(partner);setPartnerName(partner.name);setPartnerPhone(partner.phone_number);setPartnerEmail(partner.email);setShowPartnerModal(true);};const handleSubmitPartner=async e=>{e.preventDefault();setLoading(true);const{data:{user}}=await supabase.auth.getUser();if(!user){alert('Debes iniciar sesión para gestionar socios.');setLoading(false);return;}const userId=user.id;const partnerData={name:partnerName,phone_number:partnerPhone,email:partnerEmail,user_id:userId};if(currentPartner){const{error}=await supabase.from('partners').update(partnerData).eq('id',currentPartner.id).eq('user_id',userId);if(error)console.error('Error updating partner:',error.message);}else{const{error}=await supabase.from('partners').insert(partnerData);if(error)console.error('Error adding partner:',error.message);}setShowPartnerModal(false);fetchData();};const handleDeletePartner=async partnerId=>{if(window.confirm('¿Estás seguro de que quieres eliminar este socio y todos sus préstamos asociados?')){setLoading(true);const{data:{user}}=await supabase.auth.getUser();if(!user){alert('Debes iniciar sesión para eliminar socios.');setLoading(false);return;}const userId=user.id;const{error}=await supabase.from('partners').delete().eq('id',partnerId).eq('user_id',userId);if(error){console.error('Error deleting partner:',error.message);}else{fetchData();}setLoading(false);}};const handleAddLoanClick=partner=>{setSelectedPartnerForLoan(partner);setLoanProductId('');setLoanQuantity(1);setLoanDate(new Date().toISOString().split('T')[0]);setShowLoanModal(true);};const handleSubmitLoan=async e=>{e.preventDefault();setLoading(true);const{data:{user}}=await supabase.auth.getUser();if(!user){alert('Debes iniciar sesión para registrar préstamos.');setLoading(false);return;}const userId=user.id;const selectedProduct=products.find(p=>p.id===loanProductId);if(!selectedProduct){console.error('Producto no encontrado para el préstamo.');setLoading(false);return;}if(loanQuantity>selectedProduct.quantity){alert('No puedes prestar más productos de los que tienes en inventario.');setLoading(false);return;}const loanData={partner_id:selectedPartnerForLoan.id,product_id:loanProductId,quantity:loanQuantity,points_at_loan:selectedProduct.points_per_unit,price_at_loan:selectedProduct.price_per_unit,loan_date:loanDate,user_id:userId};const{error:loanError}=await supabase.from('loans').insert(loanData);if(!loanError){await supabase.from('products').update({quantity:(selectedProduct.quantity||0)-loanQuantity}).eq('id',selectedProduct.id).eq('user_id',userId);}else{console.error('Error adding loan:',loanError.message);}setShowLoanModal(false);fetchData();};const handleDeleteLoan=async loanId=>{if(window.confirm('¿Estás seguro de que quieres eliminar este préstamo?')){setLoading(true);const{data:{user}}=await supabase.auth.getUser();if(!user){alert('Debes iniciar sesión para eliminar préstamos.');setLoading(false);return;}const userId=user.id;await supabase.from('loans').delete().eq('id',loanId).eq('user_id',userId);fetchData();setLoading(false);}};const totalActiveLoansPoints=partners.reduce((sum,partner)=>sum+calculateLoanTotals(partner.loans).totalPoints,0);const totalActiveLoansPrice=partners.reduce((sum,partner)=>sum+calculateLoanTotals(partner.loans).totalPrice,0);if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-4xl font-extrabold text-gray-900 mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600\",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:0.6},children:\"Gesti\\xF3n de Socios\"}),/*#__PURE__*/_jsxs(motion.button,{onClick:handleAddPartnerClick,className:\"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-2.5 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 mb-6\",whileHover:{scale:1.02},whileTap:{scale:0.98},children:[/*#__PURE__*/_jsx(Plus,{className:\"w-5 h-5\"}),\"A\\xF1adir Nuevo Socio\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:partners.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-3 bg-white/80 rounded-2xl shadow-sm\",children:\"No hay socios registrados. \\xA1Es hora de expandir tu red!\"}):/*#__PURE__*/_jsx(AnimatePresence,{children:partners.map(partner=>{const{totalPoints,totalPrice}=calculateLoanTotals(partner.loans);return/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-4 shadow-xl\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},transition:{duration:0.3},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:partner.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:partner.phone_number}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:partner.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(motion.button,{onClick:()=>handleEditPartnerClick(partner),className:\"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors\",children:/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(motion.button,{onClick:()=>handleDeletePartner(partner.id),className:\"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-base font-semibold text-gray-700 mb-2 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Handshake,{className:\"w-4 h-4 text-purple-500\"}),\" Pr\\xE9stamos Activos:\"]}),partner.loans.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-xs ml-6\",children:\"Este socio no tiene pr\\xE9stamos activos.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 ml-6\",children:partner.loans.map(loan=>{var _loan$products,_loan$products2,_loan$products3;return/*#__PURE__*/_jsxs(motion.div,{className:\"bg-gray-50 border border-gray-200 rounded-xl p-3 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-800 text-sm\",children:[((_loan$products=loan.products)===null||_loan$products===void 0?void 0:_loan$products.name)||'Producto Desconocido',\" x \",loan.quantity]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600\",children:[\"Fecha: \",new Date(loan.loan_date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600\",children:[\"Puntos: \",loan.quantity*(((_loan$products2=loan.products)===null||_loan$products2===void 0?void 0:_loan$products2.points_per_unit)||0),\" | Precio: S/. \",(loan.quantity*(((_loan$products3=loan.products)===null||_loan$products3===void 0?void 0:_loan$products3.price_per_unit)||0)).toFixed(2)]})]}),/*#__PURE__*/_jsx(motion.button,{onClick:()=>handleDeleteLoan(loan.id),className:\"p-1 bg-red-100 text-red-600 rounded-md hover:bg-red-200 transition-colors\",children:/*#__PURE__*/_jsx(XCircle,{className:\"w-3 h-3\"})})]},loan.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-bold text-gray-800 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4 text-yellow-500\"}),\" Total Pr\\xE9stamos Puntos: \",totalPoints]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-bold text-gray-800 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"w-4 h-4 text-green-500\"}),\" Total Pr\\xE9stamos Precio: S/. \",totalPrice.toFixed(2)]})]}),/*#__PURE__*/_jsxs(motion.button,{onClick:()=>handleAddLoanClick(partner),className:\"px-3 py-1.5 bg-purple-100 text-purple-600 rounded-xl font-semibold hover:bg-purple-200 transition-colors flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-3 h-3\"}),\" A\\xF1adir Pr\\xE9stamo\"]})]})]},partner.id);})})}),partners.length>0&&/*#__PURE__*/_jsx(motion.div,{className:\"mt-4 pt-3 border-t border-gray-200/50 flex justify-between items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-gray-800 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 text-yellow-500\"}),\" Total Puntos Pr\\xE9stamos Activos: \",totalActiveLoansPoints.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-gray-800 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"w-5 h-5 text-green-500\"}),\" Total Precio Pr\\xE9stamos Activos: S/. \",totalActiveLoansPrice.toFixed(2)]})]})})]});};export default Partners;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","Users","Plus","Edit","Trash2","Handshake","Package","DollarSign","Star","XCircle","supabase","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Partners","loading","setLoading","partners","setPartners","products","setProducts","showPartnerModal","setShowPartnerModal","showLoanModal","setShowLoanModal","currentPartner","setCurrentPartner","selectedPartnerForLoan","setSelectedPartnerForLoan","partnerName","setPartnerName","partnerPhone","setPartnerPhone","partnerEmail","setPartnerEmail","loanProductId","setLoanProductId","loanQuantity","setLoanQuantity","loanDate","setLoanDate","Date","toISOString","split","fetchData","data","user","auth","getUser","userId","id","partnersData","error","partnersError","from","select","eq","order","ascending","productsData","productsError","console","message","calculateLoanTotals","loans","totalPoints","totalPrice","forEach","loan","quantity","points_per_unit","price_per_unit","handleAddPartnerClick","handleEditPartnerClick","partner","name","phone_number","email","handleSubmitPartner","e","preventDefault","alert","partnerData","user_id","update","insert","handleDeletePartner","partnerId","window","confirm","delete","handleAddLoanClick","handleSubmitLoan","selectedProduct","find","p","loanData","partner_id","product_id","points_at_loan","price_at_loan","loan_date","loanError","handleDeleteLoan","loanId","totalActiveLoansPoints","reduce","sum","totalActiveLoansPrice","children","h1","className","initial","opacity","y","animate","transition","duration","button","onClick","whileHover","scale","whileTap","length","map","div","exit","x","_loan$products","_loan$products2","_loan$products3","toLocaleDateString","toFixed"],"sources":["C:/Users/donny/Downloads/project (1)/src/pages/Partners.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Users, Plus, Edit, Trash2, Handshake, Package, DollarSign, Star, XCircle } from 'lucide-react';\r\nimport { supabase } from '../supabaseClient';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\n\r\nconst Partners = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [partners, setPartners] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [showPartnerModal, setShowPartnerModal] = useState(false);\r\n  const [showLoanModal, setShowLoanModal] = useState(false);\r\n  const [currentPartner, setCurrentPartner] = useState(null);\r\n  const [selectedPartnerForLoan, setSelectedPartnerForLoan] = useState(null);\r\n\r\n  const [partnerName, setPartnerName] = useState('');\r\n  const [partnerPhone, setPartnerPhone] = useState('');\r\n  const [partnerEmail, setPartnerEmail] = useState('');\r\n\r\n  const [loanProductId, setLoanProductId] = useState('');\r\n  const [loanQuantity, setLoanQuantity] = useState(1);\r\n  const [loanDate, setLoanDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const userId = user.id;\r\n\r\n    const { data: partnersData, error: partnersError } = await supabase\r\n      .from('partners')\r\n      .select('*, loans(*, products(id, name, points_per_unit, price_per_unit))')\r\n      .eq('user_id', userId)\r\n      .order('name', { ascending: true });\r\n\r\n    const { data: productsData, error: productsError } = await supabase\r\n      .from('products')\r\n      .select('*')\r\n      .eq('user_id', userId);\r\n\r\n    if (partnersError) console.error('Error fetching partners:', partnersError.message);\r\n    if (productsError) console.error('Error fetching products:', productsError.message);\r\n\r\n    setPartners(partnersData || []);\r\n    setProducts(productsData || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  const calculateLoanTotals = (loans) => {\r\n    let totalPoints = 0;\r\n    let totalPrice = 0;\r\n    loans.forEach(loan => {\r\n      if (loan.products) {\r\n        totalPoints += loan.quantity * loan.products.points_per_unit;\r\n        totalPrice += loan.quantity * loan.products.price_per_unit;\r\n      }\r\n    });\r\n    return { totalPoints, totalPrice };\r\n  };\r\n\r\n  const handleAddPartnerClick = () => {\r\n    setCurrentPartner(null);\r\n    setPartnerName('');\r\n    setPartnerPhone('');\r\n    setPartnerEmail('');\r\n    setShowPartnerModal(true);\r\n  };\r\n\r\n  const handleEditPartnerClick = (partner) => {\r\n    setCurrentPartner(partner);\r\n    setPartnerName(partner.name);\r\n    setPartnerPhone(partner.phone_number);\r\n    setPartnerEmail(partner.email);\r\n    setShowPartnerModal(true);\r\n  };\r\n\r\n  const handleSubmitPartner = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) {\r\n      alert('Debes iniciar sesión para gestionar socios.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const userId = user.id;\r\n\r\n    const partnerData = {\r\n      name: partnerName,\r\n      phone_number: partnerPhone,\r\n      email: partnerEmail,\r\n      user_id: userId\r\n    };\r\n\r\n    if (currentPartner) {\r\n      const { error } = await supabase\r\n        .from('partners')\r\n        .update(partnerData)\r\n        .eq('id', currentPartner.id)\r\n        .eq('user_id', userId);\r\n      if (error) console.error('Error updating partner:', error.message);\r\n    } else {\r\n      const { error } = await supabase\r\n        .from('partners')\r\n        .insert(partnerData);\r\n      if (error) console.error('Error adding partner:', error.message);\r\n    }\r\n\r\n    setShowPartnerModal(false);\r\n    fetchData();\r\n  };\r\n\r\n  const handleDeletePartner = async (partnerId) => {\r\n    if (window.confirm('¿Estás seguro de que quieres eliminar este socio y todos sus préstamos asociados?')) {\r\n      setLoading(true);\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        alert('Debes iniciar sesión para eliminar socios.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const userId = user.id;\r\n\r\n      const { error } = await supabase\r\n        .from('partners')\r\n        .delete()\r\n        .eq('id', partnerId)\r\n        .eq('user_id', userId);\r\n\r\n      if (error) {\r\n        console.error('Error deleting partner:', error.message);\r\n      } else {\r\n        fetchData();\r\n      }\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddLoanClick = (partner) => {\r\n    setSelectedPartnerForLoan(partner);\r\n    setLoanProductId('');\r\n    setLoanQuantity(1);\r\n    setLoanDate(new Date().toISOString().split('T')[0]);\r\n    setShowLoanModal(true);\r\n  };\r\n\r\n  const handleSubmitLoan = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) {\r\n      alert('Debes iniciar sesión para registrar préstamos.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const userId = user.id;\r\n\r\n    const selectedProduct = products.find(p => p.id === loanProductId);\r\n    if (!selectedProduct) {\r\n      console.error('Producto no encontrado para el préstamo.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    if (loanQuantity > selectedProduct.quantity) {\r\n      alert('No puedes prestar más productos de los que tienes en inventario.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const loanData = {\r\n      partner_id: selectedPartnerForLoan.id,\r\n      product_id: loanProductId,\r\n      quantity: loanQuantity,\r\n      points_at_loan: selectedProduct.points_per_unit,\r\n      price_at_loan: selectedProduct.price_per_unit,\r\n      loan_date: loanDate,\r\n      user_id: userId\r\n    };\r\n\r\n    const { error: loanError } = await supabase\r\n      .from('loans')\r\n      .insert(loanData);\r\n\r\n    if (!loanError) {\r\n      await supabase\r\n        .from('products')\r\n        .update({ quantity: (selectedProduct.quantity || 0) - loanQuantity })\r\n        .eq('id', selectedProduct.id)\r\n        .eq('user_id', userId);\r\n    } else {\r\n      console.error('Error adding loan:', loanError.message);\r\n    }\r\n\r\n    setShowLoanModal(false);\r\n    fetchData();\r\n  };\r\n\r\n  const handleDeleteLoan = async (loanId) => {\r\n    if (window.confirm('¿Estás seguro de que quieres eliminar este préstamo?')) {\r\n      setLoading(true);\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        alert('Debes iniciar sesión para eliminar préstamos.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      const userId = user.id;\r\n\r\n      await supabase\r\n        .from('loans')\r\n        .delete()\r\n        .eq('id', loanId)\r\n        .eq('user_id', userId);\r\n\r\n      fetchData();\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const totalActiveLoansPoints = partners.reduce((sum, partner) => sum + calculateLoanTotals(partner.loans).totalPoints, 0);\r\n  const totalActiveLoansPrice = partners.reduce((sum, partner) => sum + calculateLoanTotals(partner.loans).totalPrice, 0);\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <motion.h1\r\n        className=\"text-4xl font-extrabold text-gray-900 mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-purple-600 to-pink-600\"\r\n        initial={{ opacity: 0, y: -50 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n      >\r\n        Gestión de Socios\r\n      </motion.h1>\r\n\r\n      {/* Botón para añadir socio */}\r\n      <motion.button\r\n        onClick={handleAddPartnerClick}\r\n        className=\"w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-2.5 rounded-xl font-semibold shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 mb-6\"\r\n        whileHover={{ scale: 1.02 }}\r\n        whileTap={{ scale: 0.98 }}\r\n      >\r\n        <Plus className=\"w-5 h-5\" />\r\n        Añadir Nuevo Socio\r\n      </motion.button>\r\n\r\n      {/* Lista de socios */}\r\n      <div className=\"space-y-3\">\r\n        {partners.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center py-3 bg-white/80 rounded-2xl shadow-sm\">\r\n            No hay socios registrados. ¡Es hora de expandir tu red!\r\n          </p>\r\n        ) : (\r\n          <AnimatePresence>\r\n            {partners.map((partner) => {\r\n              const { totalPoints, totalPrice } = calculateLoanTotals(partner.loans);\r\n              return (\r\n                <motion.div\r\n                  key={partner.id}\r\n                  className=\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-4 shadow-xl\"\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, x: -50 }}\r\n                  transition={{ duration: 0.3 }}\r\n                >\r\n                  {/* Info del socio */}\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <div>\r\n                      <h3 className=\"text-xl font-bold text-gray-800\">{partner.name}</h3>\r\n                      <p className=\"text-gray-600 text-sm\">{partner.phone_number}</p>\r\n                      <p className=\"text-gray-600 text-sm\">{partner.email}</p>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                      <motion.button\r\n                        onClick={() => handleEditPartnerClick(partner)}\r\n                        className=\"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors\"\r\n                      >\r\n                        <Edit className=\"w-4 h-4\" />\r\n                      </motion.button>\r\n                      <motion.button\r\n                        onClick={() => handleDeletePartner(partner.id)}\r\n                        className=\"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </motion.button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Lista de préstamos */}\r\n                  <h4 className=\"text-base font-semibold text-gray-700 mb-2 flex items-center gap-1.5\">\r\n                    <Handshake className=\"w-4 h-4 text-purple-500\" /> Préstamos Activos:\r\n                  </h4>\r\n                  {partner.loans.length === 0 ? (\r\n                    <p className=\"text-gray-500 text-xs ml-6\">Este socio no tiene préstamos activos.</p>\r\n                  ) : (\r\n                    <div className=\"space-y-2 ml-6\">\r\n                      {partner.loans.map((loan) => (\r\n                        <motion.div\r\n                          key={loan.id}\r\n                          className=\"bg-gray-50 border border-gray-200 rounded-xl p-3 flex justify-between items-center\"\r\n                        >\r\n                          <div>\r\n                            <p className=\"font-medium text-gray-800 text-sm\">\r\n                              {loan.products?.name || 'Producto Desconocido'} x {loan.quantity}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-600\">Fecha: {new Date(loan.loan_date).toLocaleDateString()}</p>\r\n                            <p className=\"text-xs text-gray-600\">\r\n                              Puntos: {loan.quantity * (loan.products?.points_per_unit || 0)} | Precio: S/. {(loan.quantity * (loan.products?.price_per_unit || 0)).toFixed(2)}\r\n                            </p>\r\n                          </div>\r\n                          <motion.button\r\n                            onClick={() => handleDeleteLoan(loan.id)}\r\n                            className=\"p-1 bg-red-100 text-red-600 rounded-md hover:bg-red-200 transition-colors\"\r\n                          >\r\n                            <XCircle className=\"w-3 h-3\" />\r\n                          </motion.button>\r\n                        </motion.div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Totales y botón de añadir préstamo */}\r\n                  <div className=\"mt-3 pt-3 border-t border-gray-200 flex justify-between items-center\">\r\n                    <div>\r\n                      <p className=\"text-base font-bold text-gray-800 flex items-center gap-1.5\">\r\n                        <Star className=\"w-4 h-4 text-yellow-500\" /> Total Préstamos Puntos: {totalPoints}\r\n                      </p>\r\n                      <p className=\"text-base font-bold text-gray-800 flex items-center gap-1.5\">\r\n                        <DollarSign className=\"w-4 h-4 text-green-500\" /> Total Préstamos Precio: S/. {totalPrice.toFixed(2)}\r\n                      </p>\r\n                    </div>\r\n                    <motion.button\r\n                      onClick={() => handleAddLoanClick(partner)}\r\n                      className=\"px-3 py-1.5 bg-purple-100 text-purple-600 rounded-xl font-semibold hover:bg-purple-200 transition-colors flex items-center gap-1.5\"\r\n                    >\r\n                      <Plus className=\"w-3 h-3\" /> Añadir Préstamo\r\n                    </motion.button>\r\n                  </div>\r\n                </motion.div>\r\n              );\r\n            })}\r\n          </AnimatePresence>\r\n        )}\r\n      </div>\r\n\r\n      {/* Totales generales */}\r\n      {partners.length > 0 && (\r\n        <motion.div className=\"mt-4 pt-3 border-t border-gray-200/50 flex justify-between items-center\">\r\n          <div>\r\n            <p className=\"text-lg font-bold text-gray-800 flex items-center gap-1.5\">\r\n              <Star className=\"w-5 h-5 text-yellow-500\" /> Total Puntos Préstamos Activos: {totalActiveLoansPoints.toFixed(2)}\r\n            </p>\r\n            <p className=\"text-lg font-bold text-gray-800 flex items-center gap-1.5\">\r\n              <DollarSign className=\"w-5 h-5 text-green-500\" /> Total Precio Préstamos Activos: S/. {totalActiveLoansPrice.toFixed(2)}\r\n            </p>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Partners;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}