{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{History as HistoryIcon,CheckCircle,XCircle,Truck,Calendar,DollarSign,Star}from'lucide-react';import{supabase}from'../supabaseClient';import LoadingSpinner from'../components/LoadingSpinner';import{parseISO,isValid}from'date-fns';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const History=()=>{const[loading,setLoading]=useState(true);const[orders,setOrders]=useState([]);const[products,setProducts]=useState([]);const[filterStatus,setFilterStatus]=useState('all');const[filterDateRange,setFilterDateRange]=useState('all');useEffect(()=>{fetchHistory();},[filterStatus,filterDateRange]);const fetchHistory=async()=>{setLoading(true);const{data:{user}}=await supabase.auth.getUser();if(!user){setLoading(false);return;}const userId=user.id;const{data:productsData,error:productsError}=await supabase.from('products').select('id, name, points_per_unit, price_per_unit').eq('user_id',userId);if(productsError)console.error('Error fetching products:',productsError.message);setProducts(productsData||[]);let query=supabase.from('orders').select('*, order_items(*), customers(id, name)').eq('user_id',userId).order('created_at',{ascending:false});if(filterStatus!=='all'){query=query.eq('status',filterStatus);}const now=new Date();if(filterDateRange==='last30'){const thirtyDaysAgo=new Date(now.setDate(now.getDate()-30)).toISOString();query=query.gte('created_at',thirtyDaysAgo);}else if(filterDateRange==='last90'){const ninetyDaysAgo=new Date(now.setDate(now.getDate()-90)).toISOString();query=query.gte('created_at',ninetyDaysAgo);}const{data:ordersData,error:ordersError}=await query;if(ordersError)console.error('Error fetching orders history:',ordersError.message);setOrders(ordersData||[]);setLoading(false);};const getProductDetails=productId=>{return products.find(p=>p.id===productId);};const calculateOrderTotals=orderItems=>{let totalPoints=0;let totalPrice=0;orderItems.forEach(item=>{const product=getProductDetails(item.product_id);if(product){totalPoints+=item.quantity*(item.points_at_sale||product.points_per_unit);totalPrice+=item.quantity*(item.price_at_sale||product.price_per_unit);}});return{totalPoints,totalPrice};};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(motion.h1,{className:\"text-4xl font-extrabold text-gray-900 mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600\",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:0.6},children:\"Historial de Pedidos\"}),/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-2xl p-4 mb-6 shadow-md flex flex-col sm:flex-row justify-around items-center gap-4\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.2},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"statusFilter\",className:\"text-gray-700 font-medium mb-1\",children:\"Estado:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"statusFilter\",value:filterStatus,onChange:e=>setFilterStatus(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/30\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pendientes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delivered\",children:\"Entregados\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelados\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dateRangeFilter\",className:\"text-gray-700 font-medium mb-1\",children:\"Rango de Fecha:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"dateRangeFilter\",value:filterDateRange,onChange:e=>setFilterDateRange(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/30\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todo el historial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"last30\",children:\"\\xDAltimos 30 d\\xEDas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"last90\",children:\"\\xDAltimos 90 d\\xEDas\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:orders.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-3 bg-white/80 rounded-2xl shadow-sm\",children:\"No hay pedidos en el historial con los filtros seleccionados.\"}):/*#__PURE__*/_jsx(AnimatePresence,{children:orders.map(order=>{var _order$customers;const{totalPoints,totalPrice}=calculateOrderTotals(order.order_items);const orderDate=isValid(parseISO(order.created_at))?new Date(order.created_at).toLocaleDateString():'Fecha Desconocida';const deliveryDate=isValid(parseISO(order.delivery_date))?new Date(order.delivery_date).toLocaleDateString():'Fecha Desconocida';let statusColor='';let statusIcon=null;switch(order.status){case'pending':statusColor='text-orange-500';statusIcon=/*#__PURE__*/_jsx(Truck,{className:\"w-4 h-4\"});break;case'delivered':statusColor='text-green-500';statusIcon=/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"});break;case'cancelled':statusColor='text-red-500';statusIcon=/*#__PURE__*/_jsx(XCircle,{className:\"w-4 h-4\"});break;default:statusColor='text-gray-500';statusIcon=null;}return/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-4 shadow-xl\",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-50},transition:{duration:0.3},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:[\"Cliente: \",((_order$customers=order.customers)===null||_order$customers===void 0?void 0:_order$customers.name)||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-3 h-3\"}),\" Pedido: \",orderDate]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-3 h-3\"}),\" Entrega: \",deliveryDate]})]}),/*#__PURE__*/_jsxs(\"div\",{className:`flex items-center gap-1.5 font-semibold ${statusColor}`,children:[statusIcon,/*#__PURE__*/_jsx(\"span\",{className:\"capitalize\",children:order.status})]})]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-base font-semibold text-gray-700 mb-2 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(HistoryIcon,{className:\"w-4 h-4 text-indigo-500\"}),\" Productos del Pedido:\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside ml-6 text-sm text-gray-700 space-y-1\",children:order.order_items.map(item=>{const product=getProductDetails(item.product_id);return/*#__PURE__*/_jsxs(\"li\",{children:[(product===null||product===void 0?void 0:product.name)||'Producto Desconocido',\" x \",item.quantity,/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-gray-500\",children:[\"(Puntos: \",item.quantity*(item.points_at_sale||(product===null||product===void 0?void 0:product.points_per_unit)||0),\", Precio: S/. \",(item.quantity*(item.price_at_sale||(product===null||product===void 0?void 0:product.price_per_unit)||0)).toFixed(2),\")\"]})]},item.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-gray-200 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-bold text-gray-800 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4 text-yellow-500\"}),\" Total Puntos: \",totalPoints.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-base font-bold text-gray-800 flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"w-4 h-4 text-green-500\"}),\" Total Precio: S/. \",totalPrice.toFixed(2)]})]})]},order.id);})})})]});};export default History;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","History","HistoryIcon","CheckCircle","XCircle","Truck","Calendar","DollarSign","Star","supabase","LoadingSpinner","parseISO","isValid","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","loading","setLoading","orders","setOrders","products","setProducts","filterStatus","setFilterStatus","filterDateRange","setFilterDateRange","fetchHistory","data","user","auth","getUser","userId","id","productsData","error","productsError","from","select","eq","console","message","query","order","ascending","now","Date","thirtyDaysAgo","setDate","getDate","toISOString","gte","ninetyDaysAgo","ordersData","ordersError","getProductDetails","productId","find","p","calculateOrderTotals","orderItems","totalPoints","totalPrice","forEach","item","product","product_id","quantity","points_at_sale","points_per_unit","price_at_sale","price_per_unit","children","h1","className","initial","opacity","y","animate","transition","duration","div","delay","htmlFor","value","onChange","e","target","length","map","_order$customers","order_items","orderDate","created_at","toLocaleDateString","deliveryDate","delivery_date","statusColor","statusIcon","status","exit","x","customers","name","toFixed"],"sources":["C:/Users/donny/Downloads/project (1)/src/pages/History.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  History as HistoryIcon,\r\n  CheckCircle,\r\n  XCircle,\r\n  Truck,\r\n  Calendar,\r\n  DollarSign,\r\n  Star\r\n} from 'lucide-react';\r\nimport { supabase } from '../supabaseClient';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport { parseISO, isValid } from 'date-fns';\r\n\r\nconst History = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [orders, setOrders] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [filterDateRange, setFilterDateRange] = useState('all');\r\n\r\n  useEffect(() => {\r\n    fetchHistory();\r\n  }, [filterStatus, filterDateRange]);\r\n\r\n  const fetchHistory = async () => {\r\n    setLoading(true);\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    const userId = user.id;\r\n\r\n    const { data: productsData, error: productsError } = await supabase\r\n      .from('products')\r\n      .select('id, name, points_per_unit, price_per_unit')\r\n      .eq('user_id', userId);\r\n\r\n    if (productsError) console.error('Error fetching products:', productsError.message);\r\n    setProducts(productsData || []);\r\n\r\n    let query = supabase\r\n      .from('orders')\r\n      .select('*, order_items(*), customers(id, name)')\r\n      .eq('user_id', userId)\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (filterStatus !== 'all') {\r\n      query = query.eq('status', filterStatus);\r\n    }\r\n\r\n    const now = new Date();\r\n    if (filterDateRange === 'last30') {\r\n      const thirtyDaysAgo = new Date(now.setDate(now.getDate() - 30)).toISOString();\r\n      query = query.gte('created_at', thirtyDaysAgo);\r\n    } else if (filterDateRange === 'last90') {\r\n      const ninetyDaysAgo = new Date(now.setDate(now.getDate() - 90)).toISOString();\r\n      query = query.gte('created_at', ninetyDaysAgo);\r\n    }\r\n\r\n    const { data: ordersData, error: ordersError } = await query;\r\n    if (ordersError) console.error('Error fetching orders history:', ordersError.message);\r\n    setOrders(ordersData || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  const getProductDetails = (productId) => {\r\n    return products.find(p => p.id === productId);\r\n  };\r\n\r\n  const calculateOrderTotals = (orderItems) => {\r\n    let totalPoints = 0;\r\n    let totalPrice = 0;\r\n    orderItems.forEach(item => {\r\n      const product = getProductDetails(item.product_id);\r\n      if (product) {\r\n        totalPoints += item.quantity * (item.points_at_sale || product.points_per_unit);\r\n        totalPrice += item.quantity * (item.price_at_sale || product.price_per_unit);\r\n      }\r\n    });\r\n    return { totalPoints, totalPrice };\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <motion.h1\r\n        className=\"text-4xl font-extrabold text-gray-900 mb-6 text-center bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600\"\r\n        initial={{ opacity: 0, y: -50 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n      >\r\n        Historial de Pedidos\r\n      </motion.h1>\r\n\r\n      {/* Filtros */}\r\n      <motion.div\r\n        className=\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-2xl p-4 mb-6 shadow-md flex flex-col sm:flex-row justify-around items-center gap-4\"\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5, delay: 0.2 }}\r\n      >\r\n        <div className=\"flex flex-col items-center\">\r\n          <label htmlFor=\"statusFilter\" className=\"text-gray-700 font-medium mb-1\">\r\n            Estado:\r\n          </label>\r\n          <select\r\n            id=\"statusFilter\"\r\n            value={filterStatus}\r\n            onChange={(e) => setFilterStatus(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/30\"\r\n          >\r\n            <option value=\"all\">Todos</option>\r\n            <option value=\"pending\">Pendientes</option>\r\n            <option value=\"delivered\">Entregados</option>\r\n            <option value=\"cancelled\">Cancelados</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col items-center\">\r\n          <label htmlFor=\"dateRangeFilter\" className=\"text-gray-700 font-medium mb-1\">\r\n            Rango de Fecha:\r\n          </label>\r\n          <select\r\n            id=\"dateRangeFilter\"\r\n            value={filterDateRange}\r\n            onChange={(e) => setFilterDateRange(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/30\"\r\n          >\r\n            <option value=\"all\">Todo el historial</option>\r\n            <option value=\"last30\">Últimos 30 días</option>\r\n            <option value=\"last90\">Últimos 90 días</option>\r\n          </select>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Lista de Pedidos */}\r\n      <div className=\"space-y-4\">\r\n        {orders.length === 0 ? (\r\n          <p className=\"text-gray-500 text-center py-3 bg-white/80 rounded-2xl shadow-sm\">\r\n            No hay pedidos en el historial con los filtros seleccionados.\r\n          </p>\r\n        ) : (\r\n          <AnimatePresence>\r\n            {orders.map((order) => {\r\n              const { totalPoints, totalPrice } = calculateOrderTotals(order.order_items);\r\n              const orderDate = isValid(parseISO(order.created_at))\r\n                ? new Date(order.created_at).toLocaleDateString()\r\n                : 'Fecha Desconocida';\r\n              const deliveryDate = isValid(parseISO(order.delivery_date))\r\n                ? new Date(order.delivery_date).toLocaleDateString()\r\n                : 'Fecha Desconocida';\r\n\r\n              let statusColor = '';\r\n              let statusIcon = null;\r\n              switch (order.status) {\r\n                case 'pending':\r\n                  statusColor = 'text-orange-500';\r\n                  statusIcon = <Truck className=\"w-4 h-4\" />;\r\n                  break;\r\n                case 'delivered':\r\n                  statusColor = 'text-green-500';\r\n                  statusIcon = <CheckCircle className=\"w-4 h-4\" />;\r\n                  break;\r\n                case 'cancelled':\r\n                  statusColor = 'text-red-500';\r\n                  statusIcon = <XCircle className=\"w-4 h-4\" />;\r\n                  break;\r\n                default:\r\n                  statusColor = 'text-gray-500';\r\n                  statusIcon = null;\r\n              }\r\n\r\n              return (\r\n                <motion.div\r\n                  key={order.id}\r\n                  className=\"bg-white/90 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-4 shadow-xl\"\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, x: -50 }}\r\n                  transition={{ duration: 0.3 }}\r\n                >\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <div>\r\n                      <h3 className=\"text-xl font-bold text-gray-800\">\r\n                        Cliente: {order.customers?.name || 'N/A'}\r\n                      </h3>\r\n                      <p className=\"text-gray-600 text-sm flex items-center gap-1\">\r\n                        <Calendar className=\"w-3 h-3\" /> Pedido: {orderDate}\r\n                      </p>\r\n                      <p className=\"text-gray-600 text-sm flex items-center gap-1\">\r\n                        <Calendar className=\"w-3 h-3\" /> Entrega: {deliveryDate}\r\n                      </p>\r\n                    </div>\r\n                    <div className={`flex items-center gap-1.5 font-semibold ${statusColor}`}>\r\n                      {statusIcon}\r\n                      <span className=\"capitalize\">{order.status}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <h4 className=\"text-base font-semibold text-gray-700 mb-2 flex items-center gap-1.5\">\r\n                    <HistoryIcon className=\"w-4 h-4 text-indigo-500\" /> Productos del Pedido:\r\n                  </h4>\r\n                  <ul className=\"list-disc list-inside ml-6 text-sm text-gray-700 space-y-1\">\r\n                    {order.order_items.map(item => {\r\n                      const product = getProductDetails(item.product_id);\r\n                      return (\r\n                        <li key={item.id}>\r\n                          {product?.name || 'Producto Desconocido'} x {item.quantity}\r\n                          <span className=\"ml-2 text-gray-500\">\r\n                            (Puntos: {item.quantity * (item.points_at_sale || product?.points_per_unit || 0)},\r\n                            Precio: S/. {(item.quantity * (item.price_at_sale || product?.price_per_unit || 0)).toFixed(2)})\r\n                          </span>\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n\r\n                  <div className=\"mt-3 pt-3 border-t border-gray-200 flex justify-between items-center\">\r\n                    <p className=\"text-base font-bold text-gray-800 flex items-center gap-1.5\">\r\n                      <Star className=\"w-4 h-4 text-yellow-500\" /> Total Puntos: {totalPoints.toFixed(2)}\r\n                    </p>\r\n                    <p className=\"text-base font-bold text-gray-800 flex items-center gap-1.5\">\r\n                      <DollarSign className=\"w-4 h-4 text-green-500\" /> Total Precio: S/. {totalPrice.toFixed(2)}\r\n                    </p>\r\n                  </div>\r\n                </motion.div>\r\n              );\r\n            })}\r\n          </AnimatePresence>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}